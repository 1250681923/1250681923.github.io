{"title":"pyecharts柱状图-进阶","uid":"ce2fec8b4c37214b0a0a286c8164327b","slug":"pyecharts柱状图-进阶","date":"2021-12-14T15:42:19.000Z","updated":"2021-12-15T01:55:23.436Z","comments":true,"path":"api/articles/pyecharts柱状图-进阶.json","keywords":null,"cover":"/img/柱状图进阶.jpg","content":"<p>封面跟初阶的是兄弟俩，估计很多人没体验过独自一人漫无目的行走几十公里，然后平静地等待日出。<br>关于录制gif:</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/101336247\">电脑如何录制GIF</a></p>\n<p>我总算知道了为什么有人倾向于拿python做网站。这图像导出来的动画效果真棒！交互感爆炸</p>\n<p>废话不多说，开始正题：</p>\n<h3 id=\"数据堆叠柱状图\"><a href=\"#数据堆叠柱状图\" class=\"headerlink\" title=\"数据堆叠柱状图\"></a>数据堆叠柱状图</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">from pyecharts import options as opts\nfrom pyecharts.charts import Bar\nl1&#x3D;[&#39;星期一&#39;,&#39;星期二&#39;,&#39;星期三&#39;,&#39;星期四&#39;,&#39;星期五&#39;,&#39;星期七&#39;,&#39;星期日&#39;]\nl2&#x3D;[100,200,300,400,500,400,300]\nl3&#x3D;[300,400,500,400,300,200,100]\nbar &#x3D; (\n    Bar()\n    .add_xaxis(l1)\n    .add_yaxis(&quot;l2&quot;, l2, stack&#x3D;&quot;stack1&quot;)\n    .add_yaxis(&quot;l3&quot;, l3, stack&#x3D;&quot;stack1&quot;)\n    .set_global_opts(title_opts&#x3D;opts.TitleOpts(title&#x3D;&quot;数据堆叠&quot;))\n)\nbar.render_notebook()</code></pre>\n<p>效果：<br><img src=\"https://user-images.githubusercontent.com/59725125/146031828-cf767897-e3a4-448c-bd62-99186f4fd4ea.png\" alt=\"1639496949(1)\"></p>\n<h3 id=\"柱状图和折线图合并\"><a href=\"#柱状图和折线图合并\" class=\"headerlink\" title=\"柱状图和折线图合并\"></a>柱状图和折线图合并</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">import pyecharts.options as opts\nfrom pyecharts.charts import Bar, Line\n\nx_data &#x3D; [&quot;1月&quot;, &quot;2月&quot;, &quot;3月&quot;, &quot;4月&quot;, &quot;5月&quot;, &quot;6月&quot;, &quot;7月&quot;, &quot;8月&quot;, &quot;9月&quot;, &quot;10月&quot;, &quot;11月&quot;, &quot;12月&quot;]\ny_data &#x3D; [2.6,5.9,9.0,26.4,28.7,70.7,175.6,182.2,48.7,18.8,6.0,2.3,]\nbar &#x3D; (\n    Bar(init_opts&#x3D;opts.InitOpts(width&#x3D;&quot;1000px&quot;, height&#x3D;&quot;500px&quot;))\n    .add_xaxis(xaxis_data&#x3D;x_data)\n    .add_yaxis(\n        &quot;降水量&quot;,\n        y_data,\n        label_opts&#x3D;opts.LabelOpts(is_show&#x3D;False),\n    )\n    .set_global_opts(\n        tooltip_opts&#x3D;opts.TooltipOpts(\n            is_show&#x3D;True, trigger&#x3D;&quot;axis&quot;, axis_pointer_type&#x3D;&quot;cross&quot;\n        ),\n        xaxis_opts&#x3D;opts.AxisOpts(\n            type_&#x3D;&quot;category&quot;,\n            axispointer_opts&#x3D;opts.AxisPointerOpts(is_show&#x3D;True, type_&#x3D;&quot;shadow&quot;),\n        ),\n        yaxis_opts&#x3D;opts.AxisOpts(\n            name&#x3D;&quot;水量&quot;,\n            type_&#x3D;&quot;value&quot;,\n            min_&#x3D;0,\n            max_&#x3D;250,\n            interval&#x3D;50,\n            axislabel_opts&#x3D;opts.LabelOpts(formatter&#x3D;&quot;&#123;value&#125; ml&quot;),\n            axistick_opts&#x3D;opts.AxisTickOpts(is_show&#x3D;True),\n            splitline_opts&#x3D;opts.SplitLineOpts(is_show&#x3D;True),\n        ),\n    )\n)\n\nline &#x3D; (\n    Line()\n    .add_xaxis(xaxis_data&#x3D;x_data)\n    .add_yaxis(\n        series_name&#x3D;&quot;降水量&quot;,\n        yaxis_index&#x3D;0,\n        y_axis&#x3D;[2.6,5.9,9.0,26.4,28.7,70.7,175.6,182.2,48.7,18.8,6.0,2.3,],\n        label_opts&#x3D;opts.LabelOpts(is_show&#x3D;False),\n    )\n)\n\nbar.overlap(line).render_notebook()</code></pre>\n<p>效果：<br><img src=\"https://user-images.githubusercontent.com/59725125/146034013-a814dcc8-8e15-441a-b271-ca06b6caea67.png\" alt=\"1639497662(1)\"><br>yaxis_opts=opts.AxisOpts(）中可以设置纵坐标起止范围和间隔</p>\n<h3 id=\"双纵坐标柱状图\"><a href=\"#双纵坐标柱状图\" class=\"headerlink\" title=\"双纵坐标柱状图\"></a>双纵坐标柱状图</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">import pyecharts.options as opts\nfrom pyecharts.charts import Bar, Line\nx_data &#x3D; [&quot;1月&quot;, &quot;2月&quot;, &quot;3月&quot;, &quot;4月&quot;, &quot;5月&quot;, &quot;6月&quot;, &quot;7月&quot;, &quot;8月&quot;, &quot;9月&quot;, &quot;10月&quot;, &quot;11月&quot;, &quot;12月&quot;]\ny_data &#x3D; [2.0, 4.9,7.0, 23.2,25.6,76.7,135.6,162.2,32.6,20.0, 6.4,3.3,]\n\nbar &#x3D; (\n    Bar(init_opts&#x3D;opts.InitOpts(width&#x3D;&quot;1000px&quot;, height&#x3D;&quot;600px&quot;))\n    .add_xaxis(xaxis_data&#x3D;x_data)\n    .add_yaxis(\n        &quot;蒸发量&quot;,\n        y_data,\n        yaxis_index&#x3D;0,\n        label_opts&#x3D;opts.LabelOpts(is_show&#x3D;False),\n    )\n    .add_yaxis(\n        &quot;平均温度&quot;,\n        [2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4, 23.0, 16.5, 12.0, 6.2],\n        yaxis_index&#x3D;1,\n        label_opts&#x3D;opts.LabelOpts(is_show&#x3D;False),\n    )\n    .extend_axis(\n        yaxis&#x3D;opts.AxisOpts(\n            name&#x3D;&quot;温度&quot;,\n            type_&#x3D;&quot;value&quot;,\n            min_&#x3D;0,\n            max_&#x3D;25,\n            interval&#x3D;5,\n            axislabel_opts&#x3D;opts.LabelOpts(formatter&#x3D;&quot;&#123;value&#125; °C&quot;),\n        )\n    )\n    .set_global_opts(\n        tooltip_opts&#x3D;opts.TooltipOpts(\n            is_show&#x3D;True, trigger&#x3D;&quot;axis&quot;, axis_pointer_type&#x3D;&quot;cross&quot;\n        ),\n        xaxis_opts&#x3D;opts.AxisOpts(\n            type_&#x3D;&quot;category&quot;,\n            axispointer_opts&#x3D;opts.AxisPointerOpts(is_show&#x3D;True, type_&#x3D;&quot;shadow&quot;),\n        ),\n        yaxis_opts&#x3D;opts.AxisOpts(\n            name&#x3D;&quot;水量&quot;,\n            type_&#x3D;&quot;value&quot;,\n            min_&#x3D;0,\n            max_&#x3D;250,\n            interval&#x3D;50,\n            axislabel_opts&#x3D;opts.LabelOpts(formatter&#x3D;&quot;&#123;value&#125; ml&quot;),\n            axistick_opts&#x3D;opts.AxisTickOpts(is_show&#x3D;True),\n            splitline_opts&#x3D;opts.SplitLineOpts(is_show&#x3D;True),\n        ),\n    )\n)\nbar.render_notebook()</code></pre>\n<p>效果：<br><img src=\"https://user-images.githubusercontent.com/59725125/146107489-66230bce-0566-4855-a40b-1184e281af98.png\" alt=\"1639532596(1)\"></p>\n<p>extend_axis:增加了以温度为刻度的纵坐标轴</p>\n<p>add_yaxis:yaxis_index=0表示该数据用第一个坐标轴，yaxis_index=1表示该数据用第二个坐标轴</p>\n<h3 id=\"为柱状图添加背景图片\"><a href=\"#为柱状图添加背景图片\" class=\"headerlink\" title=\"为柱状图添加背景图片\"></a>为柱状图添加背景图片</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">from pyecharts import options as opts\nfrom pyecharts.charts import Bar\nfrom pyecharts.commons.utils import JsCode\nfrom pyecharts.faker import Faker\nl2&#x3D;[100,200,300,400,500,400,300]\nl3&#x3D;[300,400,500,400,300,200,100]\nbar &#x3D; (\n    Bar(\n        init_opts&#x3D;opts.InitOpts(\n            bg_color&#x3D;&#123;&quot;type&quot;: &quot;pattern&quot;, &quot;image&quot;: JsCode(&quot;img&quot;), &quot;repeat&quot;: &quot;no-repeat&quot;&#125;\n        )\n    )\n    .add_xaxis(Faker.choose())\n    .add_yaxis(&quot;商家A&quot;, l2)\n    .add_yaxis(&quot;商家B&quot;, l3)\n    .set_global_opts(\n        title_opts&#x3D;opts.TitleOpts(\n            title&#x3D;&quot;Bar-背景图基本示例&quot;,\n            subtitle&#x3D;&quot;我是副标题&quot;,\n            title_textstyle_opts&#x3D;opts.TextStyleOpts(color&#x3D;&quot;white&quot;),\n        )\n    )\n)\nbar.add_js_funcs(\n    &quot;&quot;&quot;\n    var img &#x3D; new Image(); img.src &#x3D; &#39;https:&#x2F;&#x2F;user-images.githubusercontent.com&#x2F;59725125&#x2F;145532785-07737376-50bd-4754-8fe2-2aa7ed01fa4d.jpg&#39;;\n    &quot;&quot;&quot;\n)\nbar.render_notebook()</code></pre>\n<p>效果：<br><img src=\"https://user-images.githubusercontent.com/59725125/146107860-b729379a-136e-403e-a9d5-a013d7a7f792.png\" alt=\"1639532813(1)\"><br>只需更改img.src中图片url地址即可更换背景</p>\n<h3 id=\"为柱状图添加动画\"><a href=\"#为柱状图添加动画\" class=\"headerlink\" title=\"为柱状图添加动画\"></a>为柱状图添加动画</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">from pyecharts import options as opts\nfrom pyecharts.charts import Bar\nfrom pyecharts.faker import Faker\n\nl1&#x3D;[100,200,300,400,500,400,300]\nl2&#x3D;[300,400,500,400,300,200,100]\nbar &#x3D; (\n    Bar(\n        init_opts&#x3D;opts.InitOpts(\n            animation_opts&#x3D;opts.AnimationOpts(\n                animation_delay&#x3D;1000, animation_easing&#x3D;&quot;bounceIn&quot;\n            )\n        )\n    )\n    .add_xaxis(Faker.choose())\n    .add_yaxis(&quot;商家A&quot;, l1)\n    .add_yaxis(&quot;商家B&quot;, l2)\n    .set_global_opts(title_opts&#x3D;opts.TitleOpts(title&#x3D;&quot;Bar-动画配置基本示例&quot;, subtitle&#x3D;&quot;我是副标题&quot;))\n)\nbar.render_notebook()</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/59725125/146108606-283939f5-acca-4aca-8000-56cfc5450dec.gif\" alt=\"GIF 2021-12-15 9-53-28\"></p>\n","feature":true,"text":"封面跟初阶的是兄弟俩，估计很多人没体验过独自一人漫无目的行走几十公里，然后平静地等待日出。关于录制gif: 电脑如何录制GIF 我总算知道了为什么有人倾向于拿python做网站。这图像导出来的动画效果真棒！交互感爆炸 废话不多说，开始正题： 数据堆叠柱状图from pyechar...","link":"","photos":[],"count_time":{"symbolsCount":"6.5k","symbolsTime":"6 mins."},"categories":[{"name":"Python数据分析","slug":"Python数据分析","count":3,"path":"api/categories/Python数据分析.json"}],"tags":[{"name":"Python","slug":"Python","count":3,"path":"api/tags/Python.json"},{"name":"pyechart","slug":"pyechart","count":2,"path":"api/tags/pyechart.json"},{"name":"柱状图","slug":"柱状图","count":2,"path":"api/tags/柱状图.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%A0%86%E5%8F%A0%E6%9F%B1%E7%8A%B6%E5%9B%BE\"><span class=\"toc-text\">数据堆叠柱状图</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%B1%E7%8A%B6%E5%9B%BE%E5%92%8C%E6%8A%98%E7%BA%BF%E5%9B%BE%E5%90%88%E5%B9%B6\"><span class=\"toc-text\">柱状图和折线图合并</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8F%8C%E7%BA%B5%E5%9D%90%E6%A0%87%E6%9F%B1%E7%8A%B6%E5%9B%BE\"><span class=\"toc-text\">双纵坐标柱状图</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%BA%E6%9F%B1%E7%8A%B6%E5%9B%BE%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87\"><span class=\"toc-text\">为柱状图添加背景图片</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%BA%E6%9F%B1%E7%8A%B6%E5%9B%BE%E6%B7%BB%E5%8A%A0%E5%8A%A8%E7%94%BB\"><span class=\"toc-text\">为柱状图添加动画</span></a></li></ol>","author":{"name":"Quanito","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"A little curious hunter","socials":{"github":"https://github.com/1250681923","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"GoogleMail":{"icon":"/img/googlemail.png","link":"mailto:code.quan666zhang@gmail.com"}}}},"mapped":true,"prev_post":{},"next_post":{"title":"pyecharts柱状图-初阶","uid":"bce0f12cb1963ebdb70de9d5d2cd3dd0","slug":"pyecharts柱状图","date":"2021-12-14T15:11:16.000Z","updated":"2021-12-14T15:42:59.013Z","comments":true,"path":"api/articles/pyecharts柱状图.json","keywords":null,"cover":"/img/柱状图.jpg","text":"封面为比亚里茨海边瞭望塔上南方风景。本文为小白准备，老手可以划走。 Pyecharts简介pyecharts主要基于Web浏览器进行显示，绘制的图形比较多，包括折线图、柱状图、饼图、漏斗图 地图和极坐标图等。使用pyecharts绘图代码量很少，但绘制的图形比较美观。 pyech...","link":"","photos":[],"count_time":{"symbolsCount":"6.6k","symbolsTime":"6 mins."},"categories":[{"name":"Python数据分析","slug":"Python数据分析","count":3,"path":"api/categories/Python数据分析.json"}],"tags":[{"name":"Python","slug":"Python","count":3,"path":"api/tags/Python.json"},{"name":"pyechart","slug":"pyechart","count":2,"path":"api/tags/pyechart.json"},{"name":"柱状图","slug":"柱状图","count":2,"path":"api/tags/柱状图.json"}],"author":{"name":"Quanito","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"A little curious hunter","socials":{"github":"https://github.com/1250681923","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"GoogleMail":{"icon":"/img/googlemail.png","link":"mailto:code.quan666zhang@gmail.com"}}}},"feature":true}}